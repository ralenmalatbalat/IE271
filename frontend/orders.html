{% extends "base.html" %}

{% block title %} Orders {% endblock %}

{% block content %}
<br/><br/><br/>



<div class="row modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Add New Order</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button><br/>
      </div>
      <div class="modal-body">
        <form action='{{url_for("add_order")}}' method="post">
          <div class="mb-3">
            <label for="client-name" class="col-form-label">Client:</label>
            <input type="text" class="form-control" id="client-name" name="client-name">
          </div>
          VISSER Kit: &nbsp;&nbsp;&nbsp;&nbsp;
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="kit" id="jhs" value="JHS">
            <label class="form-check-label" for="shs">JHS</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="kit" id="shs" value="SHS">
            <label class="form-check-label" for="shs">SHS</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="kit" id="compre" value="Compre">
            <label class="form-check-label" for="compre">Compre</label>
          </div>

          <div class="mb-3">
            <label for="quantity" class="col-form-label">Quantity:</label>
            <input type="text" class="form-control" id="quantity" name="quantity">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary"  style="background-color: #87b39d; border-color: #87b39d;">Submit</button>
          </div>
        </form>
      </div>
      
    </div>
  </div>
</div>

<div class="row mx-auto" style="width: 1025px;">
  <div class="row">
    <div class="col-md-8 d-flex ">
        <h1>Order Summary</h1>
    </div>
    <div class="col-md-4 d-flex">
        <button type="button" style="width: 200px;" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal"  style="background-color: #87b39d; border-color: #87b39d;">Add Order</button>
    </div>
  </div>

<br/>
  
    <table class="table table-striped table-hover text-center" margin="20px">
        <thead>
        <tr>
            <th scope="col" style="width: 50px">Order Number</th>
            <th scope="col" style="width: 400px">Client (Name / Institution)</th>
            <th scope="col" style="width: 150px">VISSER Kit</th>
            <th scope="col" style="width: 75px">Quantity</th>
            <th scope="col" style="width: 150px">Ready for Delivery?</th>
            <th scope="col" style="width: 150px">Dispatch?</th>
            <th scope="col" style="width: 150px">Delivered?</th>
        </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr {% if order.dispatched %} class="strikeout" {% endif%} >
                <th scope="row"> {{order.order_number}} </th>
                <td> {{order.client_name}} </td>
                <td> {{order.kit}} </td>
                <td> {{order.quantity}} </td>
                <td> {{order.ready_for_dispatch}} </td>
                <td>
                  <form method="post" action='{{url_for("dispatch")}}'>
                    <input type="hidden" name="order-id" value='{{order.order_number}}'>
                    <input type="hidden" name="quantity" value='{{order.quantity}}'>
                    <input type="hidden" name="kit" value='{{order.kit}}'>
                    <button type="submit" class="btn btn-sm" {% if not order.ready_for_dispatch or order.dispatched %} disabled {% endif %}>DISPATCH</button>
                  </form> 
                </td>
                <td> {{order.dispatched }} </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<br/><br/><hr/>
{% endblock %}